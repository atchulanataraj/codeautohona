<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org">
  <head>
    <title>Autohona</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/app.css" />
    
    
        <link rel="shortcut icon" href="img/favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/default.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
		<link type="text/css" rel="stylesheet" href="css/style.css" />
                <link rel="stylesheet" href="css/alertify.core.css" />
                <link rel="stylesheet" href="css/alertify.default.css" />
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
		
		<script src="js/modernizr.custom.js"></script>
		<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
		<!--<script type="text/javascript" src="js/jquery.blockUI.js"></script> -->
		<script type="text/javascript" src="js/jquery.raty.min.js"></script>
		<script type="text/javascript" src="js/mapmodule.js"></script>
		<script type="text/javascript" src="js/jquery.leanModal.min.js"></script>
                <script type="text/javascript" src="js/getclientprofile.js"></script>
		<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
		<script type="text/javascript" src="js/cal.js"></script>
                <script src="js/alertify.min.js"></script>
		<style>
		
span.jcalendar {
font:.9em Arial, Helvetica, sans-serif;
}

div.jcalendar-wrapper {
width:20em;
}

div.jcalendar-selects {
padding:.6em .4em;
text-align:center;
}

div.jcalendar-selects select {
border:1px solid #A1A5A9;
font-size:100%;
}

div.jcalendar table {
background:#a1a5a9;
color:#000;
margin:.3em auto;
}

div.jcalendar table th {
background:#eee;
}

div.jcalendar table td {
background:#f9f9f9;
padding:0;
width:2.2em;
}

div.jcalendar table th.weekend {
background:#ddd;
}

div.jcalendar table td.weekend {
background:#e9e9e9;
}

div.jcalendar table td a {
color:#333;
display:block;
line-height:1.7em;
text-align:center;
text-decoration:none;
width:2.2em;
}

div.jcalendar table td.today a {
background:#777;
border-color:#aaa;
color:#fff;
font-weight:700;
}

div.jcalendar table td a:hover,div.jcalendar table td a:focus,div.jcalendar table td a:active {
background:#77b0d3;
color:#fff;
padding:0;
}

div.jcalendar table td a.selected {
background:#0072b9;
color:#fff;
}

div.jcalendar-links {
margin:.4em;
text-align:center;
}

div.jcalendar-links a {
padding:.2em .4em;
}
		</style>
		<style>
table.CSSTableGenerator {
	
	color:#333333;
	border-width: 1px;
	border-color: #666666;
	border-collapse: collapse;
}
table.CSSTableGenerator th {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #dedede;
}
table.CSSTableGenerator td {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #666666;
	background-color: #ffffff;
}
td{ 
 			padding:10px; 
 			} 
			.error {
  border:2px solid red;
}
.nerror {
  border:2px solid white;
}
.serror {
  border:2px solid green;
}
</style>
   
  </head>
  <body class="cbp-spmenu-push" >
					<div id="message"></div>
                    <div id="showTop"></div>
<nav class="cbp-spmenu cbp-spmenu-horizontal cbp-spmenu-top" id="cbp-spmenu-s3">
			<h3>Autohona</h3>
            <a><input type="text" id="pac-input1" style="width:100%;"placeholder="enter source" /></a>
              <a><input type="text" id="pac-input2" style="width:100%;" placeholder="enter Destination" /></a>
			<a href="#" id="showRighte">Search</a>
			<a href="#" id="roundtrip">Book an Auto</a>
			
		</nav>
		
		
		<!-- footer -->
		<div id="showBottom"></div>
		<nav class="cbp-spmenu cbp-spmenu-horizontal cbp-spmenu-bottom" id="cbp-spmenu-s4">
			<h4>@copyrights2014 by harank technologies</h4>
		</nav>
		
		<!-- footer end -->
		
		
		
		
  		<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s2" style="direction:rtl;height:86%;overflow:auto;">
			<div id="autolistDiv" style="direction:ltr;">
			</div>
		</nav>
    <div id="map-canvas"></div>
    
    <!-- for popup -->
      <div id="light" class="white_content">
	   <div class="white_content_data">
        <a href = "#" style="float:right; color:#000;" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">X</a>
        <div id="profile" >
        
        
        <table width="100%" class="CSSTableGenerator" border="0" style="margin-left: auto;margin-right: auto;">
  <tr>
    <th colspan = "2">Auto Profile</th>
  </tr>
  <tr>
    <td>Driver Name</td>

    <td> <span id="get_drivername"> </span></td>
    
  </tr>
  <tr>
    <td>Auto No:</td>

    <td><span id="get_autonumber"></span></td>
  </tr>
  <tr>
    <td>Phone No:</td>

    <td><span id="get_phonenum"></span></td>
  </tr>
  <tr>
    <td>Rating:</td>

    <td><span id="get_rating"></span></td>
  </tr>
</table>
        
      </div>
      </div>
         <!-- end signin button for google++ -->
               
	<div class="white_content_datarev">
	   <textarea rows="4" cols="50" width="500px" id="userComment" placeholder="Post your comment here...."></textarea>
	   <div id="userReview" data-score="0"></div>
	   <br>
	   <div id="pent"></div>
<br><br>     
	 <div id="reviewslist" style="overflow:auto;">
      
      </div>

	   </div>	
	   	 </div>
	        <div id="fade" class="black_overlay"></div>
			
<div id="lighte" class="white_content">
	<div class="white_content_data" style="height: 100%; ">
	<a href = "#" style="float:right; color:#000;" onclick = "document.getElementById('lighte').style.display='none';document.getElementById('fadee').style.display='none'">X</a>
	<div style="background-color:#258ecd;color:#FFF;height:30px;top:0;bottom:0;left:0;right:0;margin:0 auto;text-align:center;padding: 5px;"><span>Booking Auto</span></div>
	<div style="margin: 0 auto; width:80%; height: 100%; ">
<table border="1px" style="margin: 0 auto;width:80%;">
<tr><td><label>Date & Time</label></td><td>
<span class="jcalendar">
<div class="jcalendar-wrapper">
<div class="jcalendar-selects">
<select name="day" id="day" class="jcalendar-select-day">
      
           <option value="1">1</option>
           <option value="2">2</option>
           <option value="3">3</option>
           <option value="4">4</option>
           <option value="5">5</option>
           <option value="6">6</option>
           <option value="7">7</option>
           <option value="8">8</option>
           <option value="9">9</option>
           <option value="10">10</option>
           <option value="11">11</option>
           <option value="12">12</option>
           <option value="13">13</option>
           <option value="14">14</option>
           <option value="15">15</option>
           <option value="16">16</option>
           <option value="17">17</option>
           <option value="18">18</option>
           <option value="19">19</option>
           <option value="20">20</option>
           <option value="21">21</option>
           <option value="22">22</option>
           <option value="23">23</option>
           <option value="24">24</option>
           <option value="25">25</option>
           <option value="26">26</option>
           <option value="27">27</option>
           <option value="28">28</option> 
           <option value="29">29</option>
           <option value="30">30</option>
           <option value="31">31</option>
         </select>
         <select name="month" id="month" class="jcalendar-select-month">
        
           <option value="1">January</option>
           <option value="2">February</option>
           <option value="3">March</option>
           <option value="4">April</option>
           <option value="5">May</option>
           <option value="6">June</option>
           <option value="7">July</option>
           <option value="8">August</option>
           <option value="9">September</option>
           <option value="10">October</option>
           <option value="11">November</option>
           <option value="12">December</option>
         </select>
         <select name="year" id="year" class="jcalendar-select-year">
          
           <option value="2014">2014</option>
         </select>
       </div>
       </div>
       
    </span>
</td></tr>
<tr><td>Time :</td><td> <select name="hours" id="hour">
<option value="12">1</option>
<option value="12">2</option>
<option value="12">3</option>
<option value="12">4</option>
<option value="12">5</option>
<option value="12">6</option>
<option value="12">7</option>
<option value="12">8</option>
<option value="12">9</option>
<option value="12">10</option>
<option value="12">11</option>
<option value="12">12</option>
<option value="12">13</option>
<option value="12">14</option>
<option value="12">15</option>
<option value="12">16</option>
<option value="12">17</option>
<option value="12">18</option>
<option value="12">19</option>
<option value="12">20</option>
<option value="12">21</option>
<option value="12">22</option>
<option value="12">23</option><option value="12">24</option> </select>
<select name="minute" id="minute"> 
<option value="12">00</option>
<option value="12">05</option>
<option value="12">10</option>
<option value="12">15</option>
<option value="12">20</option>
<option value="12">25</option>
<option value="12">30</option>
<option value="12">35</option>
<option value="12">40</option>
<option value="12">45</option>
<option value="12">50</option>
<option value="12">55</option>
</select> </td></tr>
						<tr><td>Source :</td><td> <span id="srcre">Enter the Source</span><button id="againsrc" onclick = "document.getElementById('lighte').style.display='none';document.getElementById('fadee').style.display='none';">Change Source</button></td></tr>
							<tr><td><div>Destination   :</td><td><span id="dscre">Enter the Destination </span><button id="againdes" onclick = "document.getElementById('lighte').style.display='none';document.getElementById('fadee').style.display='none';">Change Destination</button></div> </td></tr>
					<tr><td><input id="isrtrip" type="checkbox" /><span>Roundtrip ?</span></td>
						<td  colspan="2" style="text-align:center;"><button id="bookbut" class='orange' onclick = "document.getElementById('lighte').style.display='none';document.getElementById('fadee').style.display='none';">Book</button></td></tr>
					</table>
				</div>
				</div>
	</div>

<div id="fadee" class="black_overlay"></div>
		<div class="container">
		<div id="modal" class="popupContainer" style="display:none;">
		<header class="popupHeader">
			<span class="header_title">Login</span>
			<span class="modal_close"><i class="fa fa-times"></i></span>
		</header>
		
		<section class="popupBody">
			<!-- Social Login -->
			<div class="social_login">
				<div class="">
					<a href="#" class="social_box fb" onclick="FB.login()">
					
					<div id="fb-root"></div>
					
					 	<span class="icon"><i class="fa fa-facebook"></i></span>
						<span class="icon_title">Connect with Facebook</span>
						
						<!-- <fb:login-button show-faces="true" width="400" max-rows="1"></fb:login-button> -->

					</a>

					<a href="#" class="social_box google">
					
						
					<span id="signinButton">
					  <span
						class="g-signin"
						data-callback="signinCallback"
						data-clientid="197887922143.apps.googleusercontent.com"
						data-cookiepolicy="single_host_origin"
						data-requestvisibleactions="http://schemas.google.com/AddActivity"
						data-scope="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"
						data-theme="dark">
						<span class="icon"><i class="fa fa-google-plus"></i></span>
						<span class="icon_title">Connect with Google</span>
					  </span>
</span>				</a>
				</div>

				<div class="centeredText">
					<span>Or use your Email address</span>
				</div>

				<div class="action_btns">
					<div class="one_half"><a href="#" id="login_form" class="btn">Login</a></div>
					<div class="one_half last"><a href="#" id="register_form" class="btn">Sign up</a></div>
				</div>
			</div>

			<!-- Username & Password Login form -->
			<div class="user_login">
				<form>
					<label>Email / Username</label>
					<input type="text" id="LoginUserName"  />
					<br />

					<label>Password</label>
					<input type="password" id="LoginUserPwd"/>
					<br />

					<div class="checkbox">
						<input id="remember" type="checkbox" />
						<label for="remember">Remember me on this computer</label>
					</div>

					<div class="action_btns">
						<div class="one_half"><a href="#" class="btn back_btn"><i class="fa fa-angle-double-left"></i> Back</a></div>
						<div class="one_half last"><a href="#" class="btn btn_red" id="UserLogin">Login</a></div>
					</div>
				</form>

				<a href="#" id="forgot_pwd"  class="forgot_password">Forgot password?</a>
			</div>

			<!-- Register Form -->
			<div class="user_register">
				<form>
					<label>First Name</label>
					<input type="text" id="regFirstName" />
					<br />
                                            <label>Last Name</label>
					<input type="text" id="regLastName" />
					<br />
					<label>Email Address</label>
					<input type="email" id="regEmail" />
					<br />

					<label>Password</label>
					<input type="password" id="regPwd" />
					<br />

                                        <label>Mobile No.</label>
					<input type="text" id="regMobile" />
					<br />


					<div class="checkbox">
						<input id="send_updates" type="checkbox" />
						<label for="send_updates">Send me occasional email updates</label>
					</div>

					<div class="action_btns">
						<div class="one_half"><a href="#" class="btn back_btn"><i class="fa fa-angle-double-left"></i> Back</a></div>
						<div class="one_half last"><a href="#" class="btn btn_red" id="regUser">Register</a></div>
					</div>
				</form>
			</div>
			<!-- code for forgot password  -->
			<div class="forgot_pwd">
				<form>
				<label>Email</label>
					<input type="text" />
					<br />
					<div class="action_btns">
						<div class="one_half"><a href="#" class="btn back_btn"><i class="fa fa-angle-double-left"></i> </a></div>
						<div class="one_half last"><a href="#" class="btn btn_red">Send mail</a></div>
					</div>
				</form>
			</div>
			
		</section>
	</div>
</div>
	<p><input type="hidden" id='active_auto_id' name="autoid" value="0">
	<input type="hidden" id='active_user_id' name="userid" value="0">
<input type="hidden" id='user_rate' name="userid" value="0">

<input type="hidden" id='user_comment' name="userid" value="0">


</p>		
 <script src="js/classie.js"></script>
		<script src="js/cssmodule.js"></script>
		 <script>
function saveReview(){
document.getElementById('light').style.display='none'; 
document.getElementById('fade').style.display='none';
$("#user_rate").val($("#userReview  > input").val());
$("#user_comment").val($("#userComment").val()); 
} 
function popupDiv(ele){
	$("#reviewslist").html("");
	$("#active_auto_id").val(ele+"");
	$.ajax({
		url : "http://autohonatest.meximas.com/service/getAutoData.php?type=reviews&&autoid="+ele,
		cache : false,
		dataType : "json",
		success : function(data) {
		var reviewslist=data[0].data;
		$.each(reviewslist,function(index,value){
			$("#reviewslist").append("<div><span><b>"+value.username+" <span id='"+value.userid+""+value.rating+"'></span></b></span><br><span>Comment:"+value.comment+"</span></div><br><hr>");
			$("#"+value.userid+""+value.rating).raty({ readOnly: true, score: value.rating });
		  });
		},
		error: function(e){
			
		}
	});
	document.getElementById('light').style.display='block';
        document.getElementById('fade').style.display='block';
	var autodata=window.location.autolist;
        var answer;
	$.each(autodata,function(index,value){
	if (value.autoid === ele)
        answer=value;
        });
	$("#photo").html("<img width='80px' style='float:left;' height='80px' src='"+answer.url+"'/>");
	$("#get_drivername").html(answer.drivername);
	$("#get_autonumber").html(answer.autoid);
	$("#get_phonenum").html(answer.phonenum);
	$("#get_rating").raty({ readOnly: true, score: answer.rating });
//alert(window.location.userid);
if(window.location.userid=='')
{
$( "#pent" ).html( "<a onclick = 'saveReview()' class='buttonth'>Rate & Review</a>").trigger("pagecreate");
}
else
{
      $( "#pent" ).html( "<a onclick = 'saveReview()' id='modal_trigger'  href='#modal' class='buttonth'>Rate & Review</a>").trigger("pagecreate");
      $("#modal_trigger").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
}

}		 		 
$('#userReview').raty({
score: function() {
       return $(this).attr('data-score');
}
});
</script>
<!-- Login box code -->
<script type="text/javascript">      
$("#againsrc").click(function(){
document.getElementById("pac-input1").className = document.getElementById("pac-input1").className + " serror";
document.getElementById("pac-input2").className = document.getElementById("pac-input2").className + " serror";
alertify.log("You may change the source");
$("#pac-input1").focus();
$("#pac-input1").select();
});
$("#againdes").click(function(){
document.getElementById("pac-input1").className = document.getElementById("pac-input1").className + " serror";
document.getElementById("pac-input2").className = document.getElementById("pac-input2").className + " serror";
alertify.log("You may change the destination");
$("#pac-input2").focus();
$("#pac-input2").select();
});
	function saveUserReview(){

		var ratVal=$("#userReview > input").attr("value");
		var cmnt=$("#userComment").val();		
                 var autoId=$("#active_auto_id").attr("value");
           			  $.ajax({
		  
		  url: "http://autohonatest.meximas.com/service/getAutoData.php?type=savereview&autoid="+autoId+"&userid=35&rating="+ratVal+"&comment="+cmnt,
		  dataType:"json",
		  success:function(){
			  alert("saved successfully");
			  $("#userComment").val("");
			  
		  },
		  error:function(){
			  alert("data input error");
		  }
				  
		  
	  });
	
	}

	$(function(){
		// Calling Login Form
		$("#login_form").click(function(){
                                            
			$(".social_login").hide();
			$(".user_login").show();
			return false;
		});

		// Calling Register Form
		$("#register_form").click(function(){
			$(".social_login").hide();
			$(".user_register").show();
			$(".header_title").text('Register');
			return false;
		});
		
		// Calling Forgot password
		$("#forgot_pwd").click(function(){
			$(".user_login").hide();
			$(".forgot_pwd").show();
			$(".header_title").text('Forgot Password');
			return false;
		});

		// Going back to Social Forms
		$(".back_btn").click(function(){
			$(".user_login").hide();
			$(".user_register").hide();
			$(".social_login").show();
			$(".header_title").text('Login');
			$(".forgot_pwd").hide();
			return false;
		});
                $(".modal_close").click(function(){
			$(".user_login").hide();
			$(".user_register").hide();
			$(".social_login").show();
			$(".header_title").text('Login');
			$(".forgot_pwd").hide();
		});


	})
</script>
<!-- facebook login code -->
<script>
  window.fbAsyncInit = function() {
  FB.init({
    appId      : 732661883422105,
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });

  // Here we subscribe to the auth.authResponseChange JavaScript event. This event is fired
  // for any authentication related change, such as login, logout or session refresh. This means that
  // whenever someone who was previously logged out tries to log in again, the correct case below 
  // will be handled. 
  FB.Event.subscribe('auth.authResponseChange', function(response) {
    // Here we specify what we do with the response anytime this event occurs. 
    if (response.status === 'connected') {
      // The response object is returned with a status field that lets the app know the current
      // login status of the person. In this case, we're handling the situation where they 
      // have logged in to the app.
      testAPI();
    } else if (response.status === 'not_authorized') {
      // In this case, the person is logged into Facebook, but not into the app, so we call
      // FB.login() to prompt them to do so. 
      // In real-life usage, you wouldn't want to immediately prompt someone to login 
      // like this, for two reasons:
      // (1) JavaScript created popup windows are blocked by most browsers unless they 
      // result from direct interaction from people using the app (such as a mouse click)
      // (2) it is a bad experience to be continually prompted to login upon page load.
      FB.login();
    } else {
      // In this case, the person is not logged into Facebook, so we call the login() 
      // function to prompt them to do so. Note that at this stage there is no indication
      // of whether they are logged into the app. If they aren't then they'll see the Login
      // dialog right after they log in to Facebook. 
      // The same caveats as above apply to the FB.login() call here.
      FB.login();
    }
  });
  };

  // Load the SDK asynchronously
  (function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "http://connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
  }(document));

  // Here we run a very simple test of the Graph API after login is successful. 
  // This testAPI() function is only called in those cases. 
  function testAPI() {
    //console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(result) {
      //alert('Good to see you, ' + response.name + '.');
     	$(".social_login").hide();
	$(".user_register").show();
	$(".header_title").text('Register');
               console.log(result);
        $("#regFirstName").val(result.first_name);
        $("#regLastName").val(result.last_name);
		
        

    });
  }
</script>

		<script type="text/javascript" src="js/jquery.leanModal.min.js"></script>
	
		
</body>
</html>					